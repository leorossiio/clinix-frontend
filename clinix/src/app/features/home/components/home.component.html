<app-header></app-header>

<div class="container">
  <section class="search-filter-container">
    <div class="search-box">
      <input type="text" placeholder="Pesquisar m√©dico..." />
    </div>

    <div class="filter-selects">
      <!-- Data Picker -->
      <input
        type="datetime-local"
        [(ngModel)]="dataSelecionada"
        class="input-date"
      />

      <!-- Especializa√ß√£o -->
      <select [(ngModel)]="especializacaoSelecionada">
        <option value="">Especializa√ß√£o</option>
        <option value="cardiologista">Cardiologista</option>
        <option value="pediatra">Pediatra</option>
        <option value="oftalmologista">Oftalmologista</option>
        <option value="ginecologista">Ginecologista</option>
      </select>

      <!-- M√©dico -->
      <select [(ngModel)]="statusSelecionado">
        <option value="">Status</option>
        <option value="carlos">N√£o agendado</option>
        <option value="leonardo">Agendado</option>
        <option value="fernando">Conclu√≠da</option>
        <option value="samara">CANCELADA</option>
      </select>
    </div>

    <div class="botoes-filtro">
      <button class="btn-danger">Limpar</button>
      <button class="btn-primary">Pesquisar ‚ûî</button>
    </div>
    <button class="btn-secondary" (click)="abrirModalCadastro()">
      ‚ûï Nova consulta
    </button>
  </section>

  <section class="consultas-section">
    <h2 class="title">CLINIX</h2>

    <div class="filter-tags">
      <span class="tag">LISTA DE CONSULTAS</span>
    </div>

    <div class="grid-container">
      <div class="card" *ngFor="let consulta of consultas">
        <h3>{{ consulta.medico?.nome || "M√©dico n√£o informado" }}</h3>
        <p>
          {{ getEspecialidadeMedico(consulta.medico?.especialidade) || "Especialidade n√£o informada" }}
        </p>
        <p>Descri√ß√£o: {{ consulta.descricao }}</p>
        <p>Dia: {{ formatarData(consulta.data) }}</p>
        <p>Hor√°rio: {{ formatarHora(consulta.data) }}</p>

        <span
          [ngClass]="{
            'status-nao-agendado': consulta.status === 0,
            'status-agendado': consulta.status === 1,
            'status-concluido': consulta.status === 2,
            'status-cancelado': consulta.status === 3
          }"
          class="status-tag"
        >
          {{ getStatusDescricao(consulta.status) }}
        </span>

        <ng-container *ngIf="tipoUsuario === 2">
          <div class="card-actions">
            <button
              class="btn-warning"
              (click)="abrirModalAtualizacaoConsulta(consulta)"
            >
              ‚úèÔ∏è
            </button>
            <button
              class="btn-danger"
              (click)="excluirConsulta(consulta, $event)"
            >
              üóë
            </button>
          </div>
        </ng-container>

        <ng-container *ngIf="tipoUsuario === 0">
          <div class="card-actions">
            <button
              class="btn-success"
              (click)="abrirModalAtualizacaoConsulta(consulta)"
            >
              Agendar
            </button>
          </div>
        </ng-container>
      </div>
    </div>

    <!-- <div class="pagination">
      <button>&lt; Previous</button>
      <button>1</button>
      <button>Next &gt;</button>
    </div> -->
  </section>

  <section class="vantagens">
    <div class="vantagem-item">
      <img src="assets/imgs/relogio.png" alt="Rel√≥gio 24h" />
      <h4>Agendamento dispon√≠vel 24h por dia</h4>
      <p>Agende sua consulta a qualquer hora e de qualquer lugar.</p>
    </div>

    <div class="vantagem-item">
      <img src="assets/imgs/celular.png" alt="Agendamento Celular" />
      <h4>Agendamento de consultas simples e pr√°tico</h4>
      <p>Encontre um especialista com poucos cliques.</p>
    </div>

    <div class="vantagem-item">
      <img src="assets/imgs/calendario.png" alt="Calend√°rio de Agendamento" />
      <h4>Agende no hor√°rio ideal pra voc√™</h4>
      <p>Busque especialistas no melhor hor√°rio para voc√™.</p>
    </div>
  </section>
</div>
<app-footer></app-footer>

<app-modal-cadastro-consulta
  [show]="modalCadastroAberto"
  [id_usuario]="id_usuario"
  [id_medico]="id_medico"
  (close)="fecharModalCadastro()"
  (salvar)="criarConsulta($event)"
>
</app-modal-cadastro-consulta>

<app-modal-atualizacao-consulta
  [show]="modalAtualizacaoConsulta"
  [consulta]="consultaSelecionada"
  (close)="fecharModalAtualizacao()"
  (salvar)="salvarConsultaAtualizada($event)"
>
</app-modal-atualizacao-consulta>
